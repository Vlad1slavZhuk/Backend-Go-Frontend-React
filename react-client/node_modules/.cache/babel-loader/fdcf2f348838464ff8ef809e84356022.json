{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/vzhuchkov/go/src/Backend-Go-Frontend-React/react-client/src/components/modals/SignInModal.js\";\nimport { Modal, Button, Form, Alert } from 'react-bootstrap';\nimport React from 'react';\nimport { AUTHENTICATION_ERROR_RESPONSE_CODE, DISPLAY_SIGN_IN_MODAL, OK_RESPONSE_CODE } from '../../constants';\nimport { signIn } from '../../services/account';\nconst initialState = {\n  isWaitingForResponse: false,\n  isError: false,\n  username: '',\n  password: ''\n};\n\nclass SignInModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleUsernameChange = ({\n      target: {\n        value\n      }\n    }) => this.setState({\n      username: value\n    });\n\n    this.handlePasswordChange = ({\n      target: {\n        value\n      }\n    }) => this.setState({\n      password: value\n    });\n\n    this.handleLogin = () => {\n      if (this.state.username.length === 0 || this.state.password.length === 0) {\n        this.setState({\n          isError: true\n        });\n        return;\n      }\n\n      this.setState({\n        isWaitingForResponse: true\n      });\n      signIn(this.state.username, this.state.password).then(({\n        responseCode\n      }) => {\n        switch (responseCode) {\n          case OK_RESPONSE_CODE:\n            this.closeModal();\n            break;\n\n          case AUTHENTICATION_ERROR_RESPONSE_CODE:\n            this.setState({\n              isError: true,\n              isWaitingForResponse: false\n            });\n            break;\n\n          default:\n            break;\n        }\n      });\n    };\n\n    this.state = initialState;\n  }\n\n  closeModal() {\n    this.props.onModalClose();\n    this.setState(initialState);\n  }\n\n  render() {\n    const {\n      isWaitingForResponse,\n      isError\n    } = this.state;\n    const {\n      displayModalType\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      show: displayModalType === DISPLAY_SIGN_IN_MODAL,\n      onHide: this.closeModal.bind(this),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"username\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              onChange: this.handleUsernameChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"password\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"password\",\n              onChange: this.handlePasswordChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Alert, {\n          show: isWaitingForResponse,\n          variant: \"primary\",\n          children: \"Account is log in, please wait\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Alert, {\n          show: isError,\n          variant: \"danger\",\n          children: \"Username or / and password is wrong\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: this.handleLogin,\n          disabled: isWaitingForResponse,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default SignInModal;","map":{"version":3,"sources":["/home/vzhuchkov/go/src/Backend-Go-Frontend-React/react-client/src/components/modals/SignInModal.js"],"names":["Modal","Button","Form","Alert","React","AUTHENTICATION_ERROR_RESPONSE_CODE","DISPLAY_SIGN_IN_MODAL","OK_RESPONSE_CODE","signIn","initialState","isWaitingForResponse","isError","username","password","SignInModal","Component","constructor","props","handleUsernameChange","target","value","setState","handlePasswordChange","handleLogin","state","length","then","responseCode","closeModal","onModalClose","render","displayModalType","bind"],"mappings":";;AAAA,SAASA,KAAT,EAAgBC,MAAhB,EAAwBC,IAAxB,EAA8BC,KAA9B,QAA2C,iBAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,kCAAT,EAA6CC,qBAA7C,EAAoEC,gBAApE,QAA4F,iBAA5F;AACA,SAASC,MAAT,QAAuB,wBAAvB;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,oBAAoB,EAAE,KADL;AAEjBC,EAAAA,OAAO,EAAE,KAFQ;AAGjBC,EAAAA,QAAQ,EAAE,EAHO;AAIjBC,EAAAA,QAAQ,EAAE;AAJO,CAArB;;AAOA,MAAMC,WAAN,SAA0BV,KAAK,CAACW,SAAhC,CAA0C;AACtCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAKnBC,oBALmB,GAKI,CAAC;AAAEC,MAAAA,MAAM,EAAE;AAAEC,QAAAA;AAAF;AAAV,KAAD,KAA2B,KAAKC,QAAL,CAAc;AAAET,MAAAA,QAAQ,EAAEQ;AAAZ,KAAd,CAL/B;;AAAA,SAMnBE,oBANmB,GAMI,CAAC;AAAEH,MAAAA,MAAM,EAAE;AAAEC,QAAAA;AAAF;AAAV,KAAD,KAA2B,KAAKC,QAAL,CAAc;AAAER,MAAAA,QAAQ,EAAEO;AAAZ,KAAd,CAN/B;;AAAA,SAQnBG,WARmB,GAQL,MAAM;AAChB,UAAI,KAAKC,KAAL,CAAWZ,QAAX,CAAoBa,MAApB,KAA+B,CAA/B,IAAoC,KAAKD,KAAL,CAAWX,QAAX,CAAoBY,MAApB,KAA+B,CAAvE,EAA0E;AACtE,aAAKJ,QAAL,CAAc;AAAEV,UAAAA,OAAO,EAAE;AAAX,SAAd;AACA;AACH;;AAGD,WAAKU,QAAL,CAAc;AAAEX,QAAAA,oBAAoB,EAAE;AAAxB,OAAd;AACAF,MAAAA,MAAM,CAAC,KAAKgB,KAAL,CAAWZ,QAAZ,EAAsB,KAAKY,KAAL,CAAWX,QAAjC,CAAN,CAAiDa,IAAjD,CAAsD,CAAC;AAAEC,QAAAA;AAAF,OAAD,KAAsB;AACxE,gBAAQA,YAAR;AACI,eAAKpB,gBAAL;AACI,iBAAKqB,UAAL;AACA;;AAEJ,eAAKvB,kCAAL;AACI,iBAAKgB,QAAL,CAAc;AAAEV,cAAAA,OAAO,EAAE,IAAX;AAAiBD,cAAAA,oBAAoB,EAAE;AAAvC,aAAd;AACA;;AAEJ;AACI;AAVR;AAYH,OAbD;AAcH,KA9BkB;;AAEf,SAAKc,KAAL,GAAaf,YAAb;AACH;;AA6BDmB,EAAAA,UAAU,GAAG;AACT,SAAKX,KAAL,CAAWY,YAAX;AACA,SAAKR,QAAL,CAAcZ,YAAd;AACH;;AAEDqB,EAAAA,MAAM,GAAG;AACL,UAAM;AACFpB,MAAAA,oBADE;AAEFC,MAAAA;AAFE,QAGF,KAAKa,KAHT;AAKA,UAAM;AACFO,MAAAA;AADE,QAEF,KAAKd,KAFT;AAIA,wBACI,QAAC,KAAD;AAAO,MAAA,IAAI,EAAEc,gBAAgB,KAAKzB,qBAAlC;AAAyD,MAAA,MAAM,EAAE,KAAKsB,UAAL,CAAgBI,IAAhB,CAAqB,IAArB,CAAjE;AAAA,8BACI,QAAC,KAAD,CAAO,MAAP;AAAc,QAAA,WAAW,MAAzB;AAAA,+BACI,QAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAKI,QAAC,KAAD,CAAO,IAAP;AAAA,gCACI,QAAC,IAAD;AAAA,kCACI,QAAC,IAAD,CAAM,KAAN;AAAY,YAAA,SAAS,EAAC,UAAtB;AAAA,oCACI,QAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,IAAD,CAAM,OAAN;AAAc,cAAA,IAAI,EAAC,MAAnB;AAA0B,cAAA,QAAQ,EAAE,KAAKd;AAAzC;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAMI,QAAC,IAAD,CAAM,KAAN;AAAY,YAAA,SAAS,EAAC,UAAtB;AAAA,oCACI,QAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,IAAD,CAAM,OAAN;AAAc,cAAA,IAAI,EAAC,UAAnB;AAA8B,cAAA,QAAQ,EAAE,KAAKI;AAA7C;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAYI,QAAC,KAAD;AAAO,UAAA,IAAI,EAAEZ,oBAAb;AAAmC,UAAA,OAAO,EAAC,SAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZJ,eAeI,QAAC,KAAD;AAAO,UAAA,IAAI,EAAEC,OAAb;AAAsB,UAAA,OAAO,EAAC,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAfJ;AAAA;AAAA;AAAA;AAAA;AAAA,cALJ,eAyBI,QAAC,KAAD,CAAO,MAAP;AAAA,+BACI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAC,SAAhB;AAA0B,UAAA,OAAO,EAAE,KAAKY,WAAxC;AAAqD,UAAA,QAAQ,EAAEb,oBAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAzBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AA+BH;;AA/EqC;;AAkF1C,eAAeI,WAAf","sourcesContent":["import { Modal, Button, Form, Alert } from 'react-bootstrap';\nimport React from 'react';\nimport { AUTHENTICATION_ERROR_RESPONSE_CODE, DISPLAY_SIGN_IN_MODAL, OK_RESPONSE_CODE } from '../../constants';\nimport { signIn } from '../../services/account';\n\nconst initialState = {\n    isWaitingForResponse: false,\n    isError: false,\n    username: '',\n    password: ''\n};\n\nclass SignInModal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = initialState;\n    }\n\n    handleUsernameChange = ({ target: { value } }) => this.setState({ username: value });\n    handlePasswordChange = ({ target: { value } }) => this.setState({ password: value });\n\n    handleLogin = () => {\n        if (this.state.username.length === 0 || this.state.password.length === 0) {\n            this.setState({ isError: true });\n            return;\n        }\n\n\n        this.setState({ isWaitingForResponse: true });\n        signIn(this.state.username, this.state.password).then(({ responseCode }) => {\n            switch (responseCode) {\n                case OK_RESPONSE_CODE:\n                    this.closeModal();\n                    break;\n\n                case AUTHENTICATION_ERROR_RESPONSE_CODE:\n                    this.setState({ isError: true, isWaitingForResponse: false });\n                    break;\n\n                default:\n                    break;\n            }\n        });\n    }\n\n    closeModal() {\n        this.props.onModalClose();\n        this.setState(initialState);\n    }\n\n    render() {\n        const {\n            isWaitingForResponse,\n            isError\n        } = this.state;\n\n        const {\n            displayModalType\n        } = this.props;\n\n        return (\n            <Modal show={displayModalType === DISPLAY_SIGN_IN_MODAL} onHide={this.closeModal.bind(this)}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Sign In</Modal.Title>\n                </Modal.Header>\n\n                <Modal.Body>\n                    <Form>\n                        <Form.Group controlId=\"username\">\n                            <Form.Label>Username</Form.Label>\n                            <Form.Control type=\"text\" onChange={this.handleUsernameChange} />\n                        </Form.Group>\n\n                        <Form.Group controlId=\"password\">\n                            <Form.Label>Password</Form.Label>\n                            <Form.Control type=\"password\" onChange={this.handlePasswordChange} />\n                        </Form.Group>\n                    </Form>\n                    <Alert show={isWaitingForResponse} variant=\"primary\">\n                        Account is log in, please wait\n                    </Alert>\n                    <Alert show={isError} variant=\"danger\">\n                        Username or / and password is wrong\n                    </Alert>\n                </Modal.Body>\n\n                <Modal.Footer>\n                    <Button variant=\"primary\" onClick={this.handleLogin} disabled={isWaitingForResponse}>Login</Button>\n                </Modal.Footer>\n            </Modal>\n        )\n    }\n}\n\nexport default SignInModal;"]},"metadata":{},"sourceType":"module"}